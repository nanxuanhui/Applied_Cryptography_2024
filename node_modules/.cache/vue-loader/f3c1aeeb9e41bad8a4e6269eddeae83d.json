{"remainingRequest":"/Users/nanxuan/Desktop/vue-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nanxuan/Desktop/vue-frontend/src/views/FileDownload.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nanxuan/Desktop/vue-frontend/src/views/FileDownload.vue","mtime":1710490298000},{"path":"/Users/nanxuan/Desktop/vue-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1712020702053},{"path":"/Users/nanxuan/Desktop/vue-frontend/node_modules/babel-loader/lib/index.js","mtime":1712020702448},{"path":"/Users/nanxuan/Desktop/vue-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1712020702053},{"path":"/Users/nanxuan/Desktop/vue-frontend/node_modules/vue-loader/lib/index.js","mtime":1712020702552}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBKU0VuY3J5cHQgZnJvbSAnanNlbmNyeXB0JzsKaW1wb3J0IENyeXB0b0pTIGZyb20gJ2NyeXB0by1qcyc7CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRpYWxvZzogZmFsc2UsCiAgICAgIHNlbGVjdGVkRmlsZTogbnVsbCwKICAgICAgZmlsZXM6IFtdLAogICAgICBoZWFkZXJzOiBbCiAgICAgICAgeyB0ZXh0OiAnTmFtZScsIHZhbHVlOiAnbmFtZScgfSwKICAgICAgICAvLyB7IHRleHQ6ICdTaXplJywgdmFsdWU6ICdzaXplJyB9LAogICAgICAgIHsgdGV4dDogJ0FjdGlvbnMnLCB2YWx1ZTogJ2FjdGlvbnMnLCBzb3J0YWJsZTogZmFsc2UgfSwKICAgICAgXSwKICAgICAgdXNlclJvbGU6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJyb2xlIiksIC8vIOS7jmxvY2FsU3RvcmFnZeiOt+WPlueUqOaIt+inkuiJsgogICAgICB1c2Vyc3RhdHVzOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgic3RhdHVzIiksIC8vIOS7jmxvY2FsU3RvcmFnZeiOt+WPlueUqOaIt+inkuiJsgogICAgfTsKICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmZldGNoRmlsZXMoKTsKICAgIAogIH0sCiAgbWV0aG9kczogewogICAgZG93bmxvYWQoZmlsZSkgewogICAgICBjb25zdCB1c2VyX3N0YXR1cyA9bG9jYWxTdG9yYWdlLmdldEl0ZW0oInN0YXR1cyIpCiAgICAgIGNvbnNvbGUubG9nKHVzZXJfc3RhdHVzKQogICAgICBpZih1c2VyX3N0YXR1cz09PSIwIil7CiAgICAgICAgdGhpcy5kb3dubG9hZEZpbGUoZmlsZSkKICAgICAgICByZXR1cm4KICAgICAgfQogICAgICB3aW5kb3cub3BlbihmaWxlLnVybCwgJ19ibGFuaycpOwogICAgfSwKICAgIGRlY3J5cHREb3dubG9hZEZpbGUoZmlsZSkgewogICAgICBjb25zdCBQUklWQVRFX0tFWSA9IGAtLS0tLUJFR0lOIFBSSVZBVEUgS0VZLS0tLS0KTUlJRXZnSUJBREFOQmdrcWhraUc5dzBCQVFFRkFBU0NCS2d3Z2dTa0FnRUFBb0lCQVFEeVNmM1ZIYms4MXVrVAo3UEwvbE51cVZIZ0ZMMm11VzltQ0NGNkRxd3dmcG9yanN0TGczNkJSL0E4N2J6emZlclB1TVZxQ3BTcEpBWHU1CjlDdVJwNWxDQjN5QU5GODM5Q0htc2xPcXdtbEZlVm9Wdm51aXRkY1ZoOXF2RG1uMVRhMkc0ZDQ3S0w3WlZOV2EKOFJNdWxXeC95bXBkTW5PSklnNDkzWWdNTTJZUHJXL1JoMytGUnI4c3Fya2ltV0YrYm5sekdvUU1jajhuU1MrSgpLck5MdFlJSjR4MzZvMU1sOFNVb3owenVYT29MM080OXZuQSt0bjZJdGlQY2R1VjlhNk43aEhTT0Q5ZkVMNHlTClk4NHhwVkRkOGVLNnJuVXRVcGlTQU5LdXhJalBHTms2emtjaFBMK0xobzNpVE96MGJaMjVobXJHdHhnMEp5cU4KbkpVd01XdkRBZ01CQUFFQ2dnRUFkdW5UdDlZbnhQRmhZWk1vekVHZDhpSVU2YzZVV3F2ZnU4OHB2QXVtSHA2WgppaG1KSUM4Qk8xdXZpaWNWUkVXdnE1YnphaTF2N0hiYTU3QXI5Z2ZBMDBSaldYVGF5dFo2RVFTeXhaczNHWTd1CnBMOWhaTUZFZDkrK2Q2NW1XS3V3SUFRWkV3WHpiUzBTelVIR2ZWVis4OVUva05BakhrbmxuWDF0dVRjOHZ6SVcKdG5kNzF6Y0xhWEx6enBKaGdrRUVHYzFJb1c3RFlmRk11UHJodFhrN3krekxJV0Zidis3R0tERlJKK2U4S1Rxcgovc3dFR1lzaEFtRDlDUmFxVzNPR2JMYjY1SU9FQ1pURFhGa1V1V1hTTmpmaU9ZVjM4blZvd3ExTklZSVFKeElICkp3c1RvQ1lmZ1pRY2lEdnRPaDZsWkFWOGJnRytnd0ZvUGxkQU0wTWZtUUtCZ1FEN0tseDJ2UHdKMWE4VXVEN3YKRVZTUG81a3lWcitBZlQvQ3VaNUUxUEZjeXQ3S01UNFRzQ1dqT09TeTRWclJIQ3lScFh3aEJqSTF1SlY0aFU0UQpxRElwSklhbDlGMmVzT3ZMZFpNYTZ4UTFVVmhuNkhwT0ZqMzlGVDJQOEJBMVNZYURFQ2N5bGRyN3orNjNXc1FHCmVBWm9mU2pib2NieDdpSXRkT0RGbDM0ZXR3S0JnUUQyOCtRVDVUOVlqdWhmSHR4dW5lS3U2bXRYVHFKdUxYVXQKRnN6aXVjSFo1YnlOalN5U012M0FkSUJBVi9WbS80RXovQUl6YW1qZWpvdTQxSTRwVE9tT0UzeitqcUZHSUk3RwpwcTlQMXkxRCt2MVVVZ1RsaUdPdmxVS0t2a1BlYTZYWnBlbEpHSDhNWUdrTDRDZDJpdlFCZ1ZTeWZudWtZSlpQCk1mL1pDQitQVlFLQmdRQ3hyN3BTVmtpSVBKL3NMSng1VE8xaDRQOVVXWUtKU0JKL2xBbWY4SFlBaTVVcHZjU0kKOFNqdlhDU1BXRmFEY1VjbWtzaEtKTFFJeFZrWk5sV1AreTNoWlhITW5pQk5VQ1RBZjZGZWZjaUNIOVpIVEhTYQpJYW9oRFpITDdxM0l4UWRnV1dFaHJGcUxvd0xpdkZmSnE4Zjh5KzdIMHArSU1Fd0ZsSllmczVrSjZRS0JnUUNBCnFyNHc1NGJEdTJHeS9iOVlHd2NhbjZUaHptU3ZCeHhBSzlzQVhreDBIVkRLWjczTFJxb1RkaC9FWm8vRDVHZ0wKRDhpTnhXbHlXODdNdEdLRmZqOUorVGxzNEIrREREK1huUTFHaWhSWmtSSWd0c002WEgrajRoN1RieUtwWm1qNQpKNHFPdlNhazZpNlJNMjhjUW5XenV4RElGMEtRZUlxWUpMTHEvMktDS1FLQmdHbXhVK2FjN3RyVWgzeUF1WTF0CkRvSjFlaWNLQVhDY1lJR1ZzOStNZTRXZWV5VHZaQnhlcVNZYW9uZTBHMDhKUVQ5eHRDSFNSb1pQWG5iMFBMOFUKNjE3N1haZmRxcDZlRkRoNWtPWHN5QzlMUWpFcVlERmdRelJNd1dZK3lmcEw2L284SWJmNW8zZFM2bWUrcHZVMApkazlwVG0yZERwZ1pzejVkNHRWa0NWTXAKLS0tLS1FTkQgUFJJVkFURSBLRVktLS0tLWAKICBheGlvcy5nZXQoZmlsZS51cmwsIHsgcmVzcG9uc2VUeXBlOiAnanNvbicgfSkKICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgY29uc3QgZW5jcnlwdGVkRGF0YSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgIGNvbnN0IGRlY3J5cHQgPSBuZXcgSlNFbmNyeXB0KCk7CiAgICAgIGRlY3J5cHQuc2V0UHJpdmF0ZUtleShQUklWQVRFX0tFWSk7CiAgICAgIGNvbnN0IGRlY3J5cHRlZEFFU0tleSA9IGRlY3J5cHQuZGVjcnlwdChlbmNyeXB0ZWREYXRhLmtleSk7CiAgICAgIGNvbnN0IGRlY3J5cHRlZENvbnRlbnQgPSBDcnlwdG9KUy5BRVMuZGVjcnlwdChlbmNyeXB0ZWREYXRhLmNvbnRlbnQsIENyeXB0b0pTLmVuYy5VdGY4LnBhcnNlKGRlY3J5cHRlZEFFU0tleSksIHsKICAgICAgICBtb2RlOiBDcnlwdG9KUy5tb2RlLkVDQiwKICAgICAgICBwYWRkaW5nOiBDcnlwdG9KUy5wYWQuUGtjczcKICAgICAgfSkudG9TdHJpbmcoQ3J5cHRvSlMuZW5jLlV0ZjgpOwoKICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtkZWNyeXB0ZWRDb250ZW50XSwgeyB0eXBlOiAidGV4dC9wbGFpbiIgfSk7CiAgICAgIGNvbnN0IGRvd25sb2FkVXJsID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CiAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgIGxpbmsuaHJlZiA9IGRvd25sb2FkVXJsOwogICAgICBsaW5rLmRvd25sb2FkID0gImRlY3J5cHRlZF8iICsgZmlsZS5uYW1lOwogICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGxpbmspOwogICAgICBsaW5rLmNsaWNrKCk7CiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobGluayk7CiAgICB9KQogICAgLmNhdGNoKGVycm9yID0+IGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRvd25sb2FkaW5nIGZpbGU6JywgZXJyb3IpKTsKfSwKICAgIGZldGNoRmlsZXMoKSB7CiAgICAgIC8vIOivt+abv+aNouS4uuS9oOeahOaWh+S7tuWIl+ihqCBBUEkKICAgICAgYXhpb3MuZ2V0KCdodHRwOi8vbG9jYWxob3N0Ojc1MjkvYXBpL2ZpbGVsaXN0JykKICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICB0aGlzLmZpbGVzID0gcmVzcG9uc2UuZGF0YS5tYXAoZmlsZSA9PiAoewogICAgICAgICAgICAuLi5maWxlLAogICAgICAgICAgICBzaXplOiAnVW5rbm93bicgLy8g5YGH6K6+5paH5Lu25aSn5bCP5pyq55+lCiAgICAgICAgICB9KSk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgZmlsZXM6JywgZXJyb3IpKTsKICAgIH0sCiAgICBkb3dubG9hZEZpbGUoZmlsZSkgewogICAgICBjb25zdCBQVUJMSUNfS0VZID0gYC0tLS0tQkVHSU4gUFVCTElDIEtFWS0tLS0tCk1JSUJJakFOQmdrcWhraUc5dzBCQVFFRkFBT0NBUThBTUlJQkNnS0NBUUVBOGtuOTFSMjVQTmJwRSt6eS81VGIKcWxSNEJTOXBybHZaZ2doZWc2c01INmFLNDdMUzROK2dVZndQTzI4ODMzcXo3akZhZ3FVcVNRRjd1ZlFya2FlWgpRZ2Q4Z0RSZk4vUWg1ckpUcXNKcFJYbGFGYjU3b3JYWEZZZmFydzVwOVUydGh1SGVPeWkrMlZUVm12RVRMcFZzCmY4cHFYVEp6aVNJT1BkMklERE5tRDYxdjBZZC9oVWEvTEtxNUlwbGhmbTU1Y3hxRURISS9KMGt2aVNxelM3V0MKQ2VNZCtxTlRKZkVsS005TTdsenFDOXp1UGI1d1ByWitpTFlqM0hibGZXdWplNFIwamcvWHhDK01rbVBPTWFWUQozZkhpdXE1MUxWS1lrZ0RTcnNTSXp4alpPczVISVR5L2k0YU40a3pzOUcyZHVZWnF4cmNZTkNjcWpaeVZNREZyCnd3SURBUUFCCi0tLS0tRU5EIFBVQkxJQyBLRVktLS0tLWAKICBheGlvcy5nZXQoZmlsZS51cmwsIHsgcmVzcG9uc2VUeXBlOiAnYXJyYXlidWZmZXInIH0pCiAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgIGNvbnN0IEFFU0tleSA9IENyeXB0b0pTLmxpYi5Xb3JkQXJyYXkucmFuZG9tKDE2KS50b1N0cmluZyhDcnlwdG9KUy5lbmMuSGV4KTsKICAgICAgY29uc3Qgd29yZEFycmF5ID0gQ3J5cHRvSlMubGliLldvcmRBcnJheS5jcmVhdGUocmVzcG9uc2UuZGF0YSk7CiAgICAgIGNvbnN0IGVuY3J5cHRlZENvbnRlbnQgPSBDcnlwdG9KUy5BRVMuZW5jcnlwdCh3b3JkQXJyYXksIENyeXB0b0pTLmVuYy5VdGY4LnBhcnNlKEFFU0tleSksIHsKICAgICAgICBtb2RlOiBDcnlwdG9KUy5tb2RlLkVDQiwKICAgICAgICBwYWRkaW5nOiBDcnlwdG9KUy5wYWQuUGtjczcKICAgICAgfSkudG9TdHJpbmcoKTsKCiAgICAgIGNvbnN0IGVuY3J5cHQgPSBuZXcgSlNFbmNyeXB0KCk7CiAgICAgIGVuY3J5cHQuc2V0UHVibGljS2V5KFBVQkxJQ19LRVkpOwogICAgICBjb25zdCBlbmNyeXB0ZWRBRVNLZXkgPSBlbmNyeXB0LmVuY3J5cHQoQUVTS2V5KTsKCiAgICAgIGNvbnN0IGVuY3J5cHRlZERhdGEgPSBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAga2V5OiBlbmNyeXB0ZWRBRVNLZXksCiAgICAgICAgY29udGVudDogZW5jcnlwdGVkQ29udGVudAogICAgICB9KTsKCiAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbZW5jcnlwdGVkRGF0YV0sIHsgdHlwZTogImFwcGxpY2F0aW9uL2pzb24iIH0pOwogICAgICBjb25zdCBkb3dubG9hZFVybCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICBsaW5rLmhyZWYgPSBkb3dubG9hZFVybDsKICAgICAgbGluay5kb3dubG9hZCA9ICJlbmNyeXB0ZWRfIiArIGZpbGUubmFtZTsKICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChsaW5rKTsKICAgICAgbGluay5jbGljaygpOwogICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGxpbmspOwogICAgfSkKICAgIC5jYXRjaChlcnJvciA9PiBjb25zb2xlLmVycm9yKCdFcnJvciBkb3dubG9hZGluZyBmaWxlOicsIGVycm9yKSk7Cn0sCiAgICBoYW5kbGVGaWxlVXBsb2FkKGV2ZW50KSB7CiAgICAgIHRoaXMuc2VsZWN0ZWRGaWxlID0gZXZlbnQudGFyZ2V0LmZpbGVzWzBdOwogICAgfSwKICAgIHVwbG9hZEZpbGUoKSB7CiAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIHRoaXMuc2VsZWN0ZWRGaWxlKTsKICAgICAgLy8g6K+35pu/5o2i5Li65L2g55qE5paH5Lu25LiK5LygIEFQSQogICAgICBheGlvcy5wb3N0KCdodHRwOi8vbG9jYWxob3N0Ojc1MjkvYXBpL3VwbG9hZCcsIGZvcm1EYXRhLCB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdtdWx0aXBhcnQvZm9ybS1kYXRhJwogICAgICAgIH0sCiAgICAgIH0pCiAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgdGhpcy5kaWFsb2cgPSBmYWxzZTsKICAgICAgICAgIHRoaXMuZmV0Y2hGaWxlcygpOwogICAgICAgICAgY29uc29sZS5sb2coJ0ZpbGUgdXBsb2FkZWQgc3VjY2Vzc2Z1bGx5Jyk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5lcnJvcignRXJyb3IgdXBsb2FkaW5nIGZpbGU6JywgZXJyb3IpKTsKICAgIH0sCgogICAgaGFuZGxlRW5jcnlwdGVkRmlsZVVwbG9hZChldmVudCkgewogICAgICBjb25zdCBmaWxlID0gZXZlbnQudGFyZ2V0LmZpbGVzWzBdOwogICAgICBpZiAoIWZpbGUpIHsKICAgICAgICBjb25zb2xlLmxvZygiZmlsZSIpCiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgIHJlYWRlci5vbmxvYWQgPSAoZSkgPT4gewogICAgICAgIGNvbnN0IGVuY3J5cHRlZERhdGEgPSBKU09OLnBhcnNlKGUudGFyZ2V0LnJlc3VsdCk7CiAgICAgICAgdGhpcy5kZWNyeXB0RmlsZShlbmNyeXB0ZWREYXRhLCBmaWxlLm5hbWUpOwogICAgICB9OwogICAgICByZWFkZXIucmVhZEFzVGV4dChmaWxlKTsKICAgIH0sCiAgICBiYXNlNjRUb0Jsb2IoYmFzZTY0LCBjb250ZW50VHlwZSkgewogICAgY29uc3Qgc2xpY2VTaXplID0gNTEyOwogICAgY29uc3QgYnl0ZUNoYXJhY3RlcnMgPSBhdG9iKGJhc2U2NCk7CiAgICBjb25zdCBieXRlQXJyYXlzID0gW107CgogICAgZm9yIChsZXQgb2Zmc2V0ID0gMDsgb2Zmc2V0IDwgYnl0ZUNoYXJhY3RlcnMubGVuZ3RoOyBvZmZzZXQgKz0gc2xpY2VTaXplKSB7CiAgICAgIGNvbnN0IHNsaWNlID0gYnl0ZUNoYXJhY3RlcnMuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBzbGljZVNpemUpOwoKICAgICAgY29uc3QgYnl0ZU51bWJlcnMgPSBuZXcgQXJyYXkoc2xpY2UubGVuZ3RoKTsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzbGljZS5sZW5ndGg7IGkrKykgewogICAgICAgIGJ5dGVOdW1iZXJzW2ldID0gc2xpY2UuY2hhckNvZGVBdChpKTsKICAgICAgfQoKICAgICAgY29uc3QgYnl0ZUFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYnl0ZU51bWJlcnMpOwogICAgICBieXRlQXJyYXlzLnB1c2goYnl0ZUFycmF5KTsKICAgIH0KCiAgICByZXR1cm4gbmV3IEJsb2IoYnl0ZUFycmF5cywge3R5cGU6IGNvbnRlbnRUeXBlfSk7CiAgfSwKICAgIGRlY3J5cHRGaWxlKGVuY3J5cHRlZERhdGEsIGZpbGVOYW1lKSB7CgogICAgIGNvbnN0IFBSSVZBVEVfS0VZID0gYC0tLS0tQkVHSU4gUFJJVkFURSBLRVktLS0tLQpNSUlFdmdJQkFEQU5CZ2txaGtpRzl3MEJBUUVGQUFTQ0JLZ3dnZ1NrQWdFQUFvSUJBUUR5U2YzVkhiazgxdWtUCjdQTC9sTnVxVkhnRkwybXVXOW1DQ0Y2RHF3d2Zwb3Jqc3RMZzM2QlIvQTg3Ynp6ZmVyUHVNVnFDcFNwSkFYdTUKOUN1UnA1bENCM3lBTkY4MzlDSG1zbE9xd21sRmVWb1Z2bnVpdGRjVmg5cXZEbW4xVGEyRzRkNDdLTDdaVk5XYQo4Uk11bFd4L3ltcGRNbk9KSWc0OTNZZ01NMllQclcvUmgzK0ZScjhzcXJraW1XRitibmx6R29RTWNqOG5TUytKCktyTkx0WUlKNHgzNm8xTWw4U1VvejB6dVhPb0wzTzQ5dm5BK3RuNkl0aVBjZHVWOWE2TjdoSFNPRDlmRUw0eVMKWTg0eHBWRGQ4ZUs2cm5VdFVwaVNBTkt1eElqUEdOazZ6a2NoUEwrTGhvM2lUT3owYloyNWhtckd0eGcwSnlxTgpuSlV3TVd2REFnTUJBQUVDZ2dFQWR1blR0OVlueFBGaFlaTW96RUdkOGlJVTZjNlVXcXZmdTg4cHZBdW1IcDZaCmlobUpJQzhCTzF1dmlpY1ZSRVd2cTViemFpMXY3SGJhNTdBcjlnZkEwMFJqV1hUYXl0WjZFUVN5eFpzM0dZN3UKcEw5aFpNRkVkOSsrZDY1bVdLdXdJQVFaRXdYemJTMFN6VUhHZlZWKzg5VS9rTkFqSGtubG5YMXR1VGM4dnpJVwp0bmQ3MXpjTGFYTHp6cEpoZ2tFRUdjMUlvVzdEWWZGTXVQcmh0WGs3eSt6TElXRmJ2KzdHS0RGUkorZThLVHFyCi9zd0VHWXNoQW1EOUNSYXFXM09HYkxiNjVJT0VDWlREWEZrVXVXWFNOamZpT1lWMzhuVm93cTFOSVlJUUp4SUgKSndzVG9DWWZnWlFjaUR2dE9oNmxaQVY4YmdHK2d3Rm9QbGRBTTBNZm1RS0JnUUQ3S2x4MnZQd0oxYThVdUQ3dgpFVlNQbzVreVZyK0FmVC9DdVo1RTFQRmN5dDdLTVQ0VHNDV2pPT1N5NFZyUkhDeVJwWHdoQmpJMXVKVjRoVTRRCnFESXBKSWFsOUYyZXNPdkxkWk1hNnhRMVVWaG42SHBPRmozOUZUMlA4QkExU1lhREVDY3lsZHI3eis2M1dzUUcKZUFab2ZTamJvY2J4N2lJdGRPREZsMzRldHdLQmdRRDI4K1FUNVQ5WWp1aGZIdHh1bmVLdTZtdFhUcUp1TFhVdApGc3ppdWNIWjVieU5qU3lTTXYzQWRJQkFWL1ZtLzRFei9BSXphbWplam91NDFJNHBUT21PRTN6K2pxRkdJSTdHCnBxOVAxeTFEK3YxVVVnVGxpR092bFVLS3ZrUGVhNlhacGVsSkdIOE1ZR2tMNENkMml2UUJnVlN5Zm51a1lKWlAKTWYvWkNCK1BWUUtCZ1FDeHI3cFNWa2lJUEovc0xKeDVUTzFoNFA5VVdZS0pTQkovbEFtZjhIWUFpNVVwdmNTSQo4U2p2WENTUFdGYURjVWNta3NoS0pMUUl4VmtaTmxXUCt5M2haWEhNbmlCTlVDVEFmNkZlZmNpQ0g5WkhUSFNhCklhb2hEWkhMN3EzSXhRZGdXV0VockZxTG93TGl2RmZKcThmOHkrN0gwcCtJTUV3RmxKWWZzNWtKNlFLQmdRQ0EKcXI0dzU0YkR1Mkd5L2I5WUd3Y2FuNlRoem1TdkJ4eEFLOXNBWGt4MEhWREtaNzNMUnFvVGRoL0Vaby9ENUdnTApEOGlOeFdseVc4N010R0tGZmo5SitUbHM0QitEREQrWG5RMUdpaFJaa1JJZ3RzTTZYSCtqNGg3VGJ5S3BabWo1Cko0cU92U2FrNmk2Uk0yOGNRbld6dXhESUYwS1FlSXFZSkxMcS8yS0NLUUtCZ0dteFUrYWM3dHJVaDN5QXVZMXQKRG9KMWVpY0tBWENjWUlHVnM5K01lNFdlZXlUdlpCeGVxU1lhb25lMEcwOEpRVDl4dENIU1JvWlBYbmIwUEw4VQo2MTc3WFpmZHFwNmVGRGg1a09Yc3lDOUxRakVxWURGZ1F6Uk13V1kreWZwTDYvbzhJYmY1bzNkUzZtZStwdlUwCmRrOXBUbTJkRHBnWnN6NWQ0dFZrQ1ZNcAotLS0tLUVORCBQUklWQVRFIEtFWS0tLS0tYAoKICAgICAgICAvLyDkvb/nlKjnp4HpkqXop6Plr4ZBRVPlr4bpkqUKICBjb25zdCBkZWNyeXB0ID0gbmV3IEpTRW5jcnlwdCgpOwogIGRlY3J5cHQuc2V0UHJpdmF0ZUtleShQUklWQVRFX0tFWSk7CiAgY29uc3QgZGVjcnlwdGVkQUVTS2V5ID0gZGVjcnlwdC5kZWNyeXB0KGVuY3J5cHRlZERhdGEua2V5KTsKCiAgLy8g5L2/55SoQUVT5a+G6ZKl6Kej5a+G5paH5Lu25YaF5a65CiAgY29uc3QgZGVjcnlwdGVkQ29udGVudCA9IENyeXB0b0pTLkFFUy5kZWNyeXB0KGVuY3J5cHRlZERhdGEuY29udGVudCwgQ3J5cHRvSlMuZW5jLlV0ZjgucGFyc2UoZGVjcnlwdGVkQUVTS2V5KSwgewogICAgbW9kZTogQ3J5cHRvSlMubW9kZS5FQ0IsCiAgICBwYWRkaW5nOiBDcnlwdG9KUy5wYWQuUGtjczcKICB9KTsKCiAgLy8g6L2s5o2i5Li6QmFzZTY077yM6YG/5YWNVVRGLTjop6PnoIHplJnor68KICBjb25zdCBkZWNyeXB0ZWRUZXh0ID0gQ3J5cHRvSlMuZW5jLkJhc2U2NC5zdHJpbmdpZnkoZGVjcnlwdGVkQ29udGVudCk7CgogIC8vIOWwhkJhc2U2NOWtl+espuS4sui9rOaNouS4ukJsb2Llr7nosaEKICBjb25zdCBibG9iID0gdGhpcy5iYXNlNjRUb0Jsb2IoZGVjcnlwdGVkVGV4dCwgJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScpOwogIGNvbnN0IGRvd25sb2FkVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKICBjb25zdCBkb3dubG9hZExpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgZG93bmxvYWRMaW5rLmhyZWYgPSBkb3dubG9hZFVybDsKICBkb3dubG9hZExpbmsuZG93bmxvYWQgPSBgZGVjcnlwdGVkXyR7ZmlsZU5hbWV9YDsKICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRvd25sb2FkTGluayk7CiAgZG93bmxvYWRMaW5rLmNsaWNrKCk7CiAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChkb3dubG9hZExpbmspOwogICAgfSwKICAKICB9Cn07Cg=="},{"version":3,"sources":["FileDownload.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"FileDownload.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <v-app>\n    <v-container>\n      <v-row>\n        <v-col cols=\"12\">\n          <v-card>\n            <v-card-title>File Download Selection</v-card-title>\n            <div v-if=\"userstatus === '1'\">\n              <h3>upload your file to Decrypt</h3>\n    <input type=\"file\"  @change=\"handleEncryptedFileUpload\" >\n  </div>\n            <v-card-text>\n              <!-- <v-btn color=\"success\" @click=\"dialog = true\">Upload File</v-btn> -->\n              <v-btn color=\"success\" @click=\"dialog = true\" v-if=\"userRole === '1'\">Upload File</v-btn>\n\n              <v-data-table :headers=\"headers\" :items=\"files\" :items-per-page=\"5\" class=\"elevation-1\">\n                <template v-slot:item.actions=\"{ item }\">\n                  <!-- <v-btn color=\"primary\" @click=\"() => download(item)\">Encrypt & Download</v-btn> -->\n                  <v-btn color=\"primary\" @click=\"() => download(item)\">Download</v-btn>\n                  <!-- <v-btn color=\"secondary\" @click=\"() => download(item)\">Decrypt & Download</v-btn> -->\n                </template>\n              </v-data-table>\n            </v-card-text>\n          </v-card>\n        </v-col>\n      </v-row>\n    </v-container>\n    <v-dialog v-model=\"dialog\" persistent max-width=\"600px\">\n      <v-card>\n        <v-card-title>Upload a file</v-card-title>\n        <v-card-text>\n          <input type=\"file\" @change=\"handleFileUpload\">\n        </v-card-text>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn color=\"blue darken-1\" text @click=\"dialog = false\">Cancel</v-btn>\n          <v-btn color=\"blue darken-1\" text @click=\"uploadFile\">Upload</v-btn>\n         \n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </v-app>\n</template>\n\n<script>\nimport axios from 'axios';\nimport JSEncrypt from 'jsencrypt';\nimport CryptoJS from 'crypto-js';\n\nexport default {\n  data() {\n    return {\n      dialog: false,\n      selectedFile: null,\n      files: [],\n      headers: [\n        { text: 'Name', value: 'name' },\n        // { text: 'Size', value: 'size' },\n        { text: 'Actions', value: 'actions', sortable: false },\n      ],\n      userRole: localStorage.getItem(\"role\"), // 从localStorage获取用户角色\n      userstatus: localStorage.getItem(\"status\"), // 从localStorage获取用户角色\n    };\n  },\n  mounted() {\n    this.fetchFiles();\n    \n  },\n  methods: {\n    download(file) {\n      const user_status =localStorage.getItem(\"status\")\n      console.log(user_status)\n      if(user_status===\"0\"){\n        this.downloadFile(file)\n        return\n      }\n      window.open(file.url, '_blank');\n    },\n    decryptDownloadFile(file) {\n      const PRIVATE_KEY = `-----BEGIN PRIVATE KEY-----\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDySf3VHbk81ukT\n7PL/lNuqVHgFL2muW9mCCF6DqwwfporjstLg36BR/A87bzzferPuMVqCpSpJAXu5\n9CuRp5lCB3yANF839CHmslOqwmlFeVoVvnuitdcVh9qvDmn1Ta2G4d47KL7ZVNWa\n8RMulWx/ympdMnOJIg493YgMM2YPrW/Rh3+FRr8sqrkimWF+bnlzGoQMcj8nSS+J\nKrNLtYIJ4x36o1Ml8SUoz0zuXOoL3O49vnA+tn6ItiPcduV9a6N7hHSOD9fEL4yS\nY84xpVDd8eK6rnUtUpiSANKuxIjPGNk6zkchPL+Lho3iTOz0bZ25hmrGtxg0JyqN\nnJUwMWvDAgMBAAECggEAdunTt9YnxPFhYZMozEGd8iIU6c6UWqvfu88pvAumHp6Z\nihmJIC8BO1uviicVREWvq5bzai1v7Hba57Ar9gfA00RjWXTaytZ6EQSyxZs3GY7u\npL9hZMFEd9++d65mWKuwIAQZEwXzbS0SzUHGfVV+89U/kNAjHknlnX1tuTc8vzIW\ntnd71zcLaXLzzpJhgkEEGc1IoW7DYfFMuPrhtXk7y+zLIWFbv+7GKDFRJ+e8KTqr\n/swEGYshAmD9CRaqW3OGbLb65IOECZTDXFkUuWXSNjfiOYV38nVowq1NIYIQJxIH\nJwsToCYfgZQciDvtOh6lZAV8bgG+gwFoPldAM0MfmQKBgQD7Klx2vPwJ1a8UuD7v\nEVSPo5kyVr+AfT/CuZ5E1PFcyt7KMT4TsCWjOOSy4VrRHCyRpXwhBjI1uJV4hU4Q\nqDIpJIal9F2esOvLdZMa6xQ1UVhn6HpOFj39FT2P8BA1SYaDECcyldr7z+63WsQG\neAZofSjbocbx7iItdODFl34etwKBgQD28+QT5T9YjuhfHtxuneKu6mtXTqJuLXUt\nFsziucHZ5byNjSySMv3AdIBAV/Vm/4Ez/AIzamjejou41I4pTOmOE3z+jqFGII7G\npq9P1y1D+v1UUgTliGOvlUKKvkPea6XZpelJGH8MYGkL4Cd2ivQBgVSyfnukYJZP\nMf/ZCB+PVQKBgQCxr7pSVkiIPJ/sLJx5TO1h4P9UWYKJSBJ/lAmf8HYAi5UpvcSI\n8SjvXCSPWFaDcUcmkshKJLQIxVkZNlWP+y3hZXHMniBNUCTAf6FefciCH9ZHTHSa\nIaohDZHL7q3IxQdgWWEhrFqLowLivFfJq8f8y+7H0p+IMEwFlJYfs5kJ6QKBgQCA\nqr4w54bDu2Gy/b9YGwcan6ThzmSvBxxAK9sAXkx0HVDKZ73LRqoTdh/EZo/D5GgL\nD8iNxWlyW87MtGKFfj9J+Tls4B+DDD+XnQ1GihRZkRIgtsM6XH+j4h7TbyKpZmj5\nJ4qOvSak6i6RM28cQnWzuxDIF0KQeIqYJLLq/2KCKQKBgGmxU+ac7trUh3yAuY1t\nDoJ1eicKAXCcYIGVs9+Me4WeeyTvZBxeqSYaone0G08JQT9xtCHSRoZPXnb0PL8U\n6177XZfdqp6eFDh5kOXsyC9LQjEqYDFgQzRMwWY+yfpL6/o8Ibf5o3dS6me+pvU0\ndk9pTm2dDpgZsz5d4tVkCVMp\n-----END PRIVATE KEY-----`\n  axios.get(file.url, { responseType: 'json' })\n    .then(response => {\n      const encryptedData = response.data;\n      const decrypt = new JSEncrypt();\n      decrypt.setPrivateKey(PRIVATE_KEY);\n      const decryptedAESKey = decrypt.decrypt(encryptedData.key);\n      const decryptedContent = CryptoJS.AES.decrypt(encryptedData.content, CryptoJS.enc.Utf8.parse(decryptedAESKey), {\n        mode: CryptoJS.mode.ECB,\n        padding: CryptoJS.pad.Pkcs7\n      }).toString(CryptoJS.enc.Utf8);\n\n      const blob = new Blob([decryptedContent], { type: \"text/plain\" });\n      const downloadUrl = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = downloadUrl;\n      link.download = \"decrypted_\" + file.name;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n    })\n    .catch(error => console.error('Error downloading file:', error));\n},\n    fetchFiles() {\n      // 请替换为你的文件列表 API\n      axios.get('http://localhost:7529/api/filelist')\n        .then(response => {\n          this.files = response.data.map(file => ({\n            ...file,\n            size: 'Unknown' // 假设文件大小未知\n          }));\n        })\n        .catch(error => console.error('Error fetching files:', error));\n    },\n    downloadFile(file) {\n      const PUBLIC_KEY = `-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA8kn91R25PNbpE+zy/5Tb\nqlR4BS9prlvZggheg6sMH6aK47LS4N+gUfwPO28833qz7jFagqUqSQF7ufQrkaeZ\nQgd8gDRfN/Qh5rJTqsJpRXlaFb57orXXFYfarw5p9U2thuHeOyi+2VTVmvETLpVs\nf8pqXTJziSIOPd2IDDNmD61v0Yd/hUa/LKq5Iplhfm55cxqEDHI/J0kviSqzS7WC\nCeMd+qNTJfElKM9M7lzqC9zuPb5wPrZ+iLYj3HblfWuje4R0jg/XxC+MkmPOMaVQ\n3fHiuq51LVKYkgDSrsSIzxjZOs5HITy/i4aN4kzs9G2duYZqxrcYNCcqjZyVMDFr\nwwIDAQAB\n-----END PUBLIC KEY-----`\n  axios.get(file.url, { responseType: 'arraybuffer' })\n    .then(response => {\n      const AESKey = CryptoJS.lib.WordArray.random(16).toString(CryptoJS.enc.Hex);\n      const wordArray = CryptoJS.lib.WordArray.create(response.data);\n      const encryptedContent = CryptoJS.AES.encrypt(wordArray, CryptoJS.enc.Utf8.parse(AESKey), {\n        mode: CryptoJS.mode.ECB,\n        padding: CryptoJS.pad.Pkcs7\n      }).toString();\n\n      const encrypt = new JSEncrypt();\n      encrypt.setPublicKey(PUBLIC_KEY);\n      const encryptedAESKey = encrypt.encrypt(AESKey);\n\n      const encryptedData = JSON.stringify({\n        key: encryptedAESKey,\n        content: encryptedContent\n      });\n\n      const blob = new Blob([encryptedData], { type: \"application/json\" });\n      const downloadUrl = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = downloadUrl;\n      link.download = \"encrypted_\" + file.name;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n    })\n    .catch(error => console.error('Error downloading file:', error));\n},\n    handleFileUpload(event) {\n      this.selectedFile = event.target.files[0];\n    },\n    uploadFile() {\n      const formData = new FormData();\n      formData.append('file', this.selectedFile);\n      // 请替换为你的文件上传 API\n      axios.post('http://localhost:7529/api/upload', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        },\n      })\n        .then(() => {\n          this.dialog = false;\n          this.fetchFiles();\n          console.log('File uploaded successfully');\n        })\n        .catch(error => console.error('Error uploading file:', error));\n    },\n\n    handleEncryptedFileUpload(event) {\n      const file = event.target.files[0];\n      if (!file) {\n        console.log(\"file\")\n        return;\n      }\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        const encryptedData = JSON.parse(e.target.result);\n        this.decryptFile(encryptedData, file.name);\n      };\n      reader.readAsText(file);\n    },\n    base64ToBlob(base64, contentType) {\n    const sliceSize = 512;\n    const byteCharacters = atob(base64);\n    const byteArrays = [];\n\n    for (let offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n      const slice = byteCharacters.slice(offset, offset + sliceSize);\n\n      const byteNumbers = new Array(slice.length);\n      for (let i = 0; i < slice.length; i++) {\n        byteNumbers[i] = slice.charCodeAt(i);\n      }\n\n      const byteArray = new Uint8Array(byteNumbers);\n      byteArrays.push(byteArray);\n    }\n\n    return new Blob(byteArrays, {type: contentType});\n  },\n    decryptFile(encryptedData, fileName) {\n\n     const PRIVATE_KEY = `-----BEGIN PRIVATE KEY-----\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDySf3VHbk81ukT\n7PL/lNuqVHgFL2muW9mCCF6DqwwfporjstLg36BR/A87bzzferPuMVqCpSpJAXu5\n9CuRp5lCB3yANF839CHmslOqwmlFeVoVvnuitdcVh9qvDmn1Ta2G4d47KL7ZVNWa\n8RMulWx/ympdMnOJIg493YgMM2YPrW/Rh3+FRr8sqrkimWF+bnlzGoQMcj8nSS+J\nKrNLtYIJ4x36o1Ml8SUoz0zuXOoL3O49vnA+tn6ItiPcduV9a6N7hHSOD9fEL4yS\nY84xpVDd8eK6rnUtUpiSANKuxIjPGNk6zkchPL+Lho3iTOz0bZ25hmrGtxg0JyqN\nnJUwMWvDAgMBAAECggEAdunTt9YnxPFhYZMozEGd8iIU6c6UWqvfu88pvAumHp6Z\nihmJIC8BO1uviicVREWvq5bzai1v7Hba57Ar9gfA00RjWXTaytZ6EQSyxZs3GY7u\npL9hZMFEd9++d65mWKuwIAQZEwXzbS0SzUHGfVV+89U/kNAjHknlnX1tuTc8vzIW\ntnd71zcLaXLzzpJhgkEEGc1IoW7DYfFMuPrhtXk7y+zLIWFbv+7GKDFRJ+e8KTqr\n/swEGYshAmD9CRaqW3OGbLb65IOECZTDXFkUuWXSNjfiOYV38nVowq1NIYIQJxIH\nJwsToCYfgZQciDvtOh6lZAV8bgG+gwFoPldAM0MfmQKBgQD7Klx2vPwJ1a8UuD7v\nEVSPo5kyVr+AfT/CuZ5E1PFcyt7KMT4TsCWjOOSy4VrRHCyRpXwhBjI1uJV4hU4Q\nqDIpJIal9F2esOvLdZMa6xQ1UVhn6HpOFj39FT2P8BA1SYaDECcyldr7z+63WsQG\neAZofSjbocbx7iItdODFl34etwKBgQD28+QT5T9YjuhfHtxuneKu6mtXTqJuLXUt\nFsziucHZ5byNjSySMv3AdIBAV/Vm/4Ez/AIzamjejou41I4pTOmOE3z+jqFGII7G\npq9P1y1D+v1UUgTliGOvlUKKvkPea6XZpelJGH8MYGkL4Cd2ivQBgVSyfnukYJZP\nMf/ZCB+PVQKBgQCxr7pSVkiIPJ/sLJx5TO1h4P9UWYKJSBJ/lAmf8HYAi5UpvcSI\n8SjvXCSPWFaDcUcmkshKJLQIxVkZNlWP+y3hZXHMniBNUCTAf6FefciCH9ZHTHSa\nIaohDZHL7q3IxQdgWWEhrFqLowLivFfJq8f8y+7H0p+IMEwFlJYfs5kJ6QKBgQCA\nqr4w54bDu2Gy/b9YGwcan6ThzmSvBxxAK9sAXkx0HVDKZ73LRqoTdh/EZo/D5GgL\nD8iNxWlyW87MtGKFfj9J+Tls4B+DDD+XnQ1GihRZkRIgtsM6XH+j4h7TbyKpZmj5\nJ4qOvSak6i6RM28cQnWzuxDIF0KQeIqYJLLq/2KCKQKBgGmxU+ac7trUh3yAuY1t\nDoJ1eicKAXCcYIGVs9+Me4WeeyTvZBxeqSYaone0G08JQT9xtCHSRoZPXnb0PL8U\n6177XZfdqp6eFDh5kOXsyC9LQjEqYDFgQzRMwWY+yfpL6/o8Ibf5o3dS6me+pvU0\ndk9pTm2dDpgZsz5d4tVkCVMp\n-----END PRIVATE KEY-----`\n\n        // 使用私钥解密AES密钥\n  const decrypt = new JSEncrypt();\n  decrypt.setPrivateKey(PRIVATE_KEY);\n  const decryptedAESKey = decrypt.decrypt(encryptedData.key);\n\n  // 使用AES密钥解密文件内容\n  const decryptedContent = CryptoJS.AES.decrypt(encryptedData.content, CryptoJS.enc.Utf8.parse(decryptedAESKey), {\n    mode: CryptoJS.mode.ECB,\n    padding: CryptoJS.pad.Pkcs7\n  });\n\n  // 转换为Base64，避免UTF-8解码错误\n  const decryptedText = CryptoJS.enc.Base64.stringify(decryptedContent);\n\n  // 将Base64字符串转换为Blob对象\n  const blob = this.base64ToBlob(decryptedText, 'application/octet-stream');\n  const downloadUrl = URL.createObjectURL(blob);\n  const downloadLink = document.createElement('a');\n  downloadLink.href = downloadUrl;\n  downloadLink.download = `decrypted_${fileName}`;\n  document.body.appendChild(downloadLink);\n  downloadLink.click();\n  document.body.removeChild(downloadLink);\n    },\n  \n  }\n};\n</script>\n\n<style scoped>\n</style>\n"]}]}